/*
 Return the child with the given id in the children hierarchy of the
 given element.
 @param element: the ancestor element,
 @param id: the identifier to search,
 @param search_in_hierachy: if true, search in the whold hierarchy,
 otherwise, search in the direct children; it is false by default,
 @param uniq: if true, return te first matching element,
 @return false or array: false if not found or the array of found
 element.
 Return the child with the given id in the children hierarchy of the
 given element.
 @param element: the ancestor element,
 @return void.
*/
'use strict';function CS_re_class(a){return new RegExp("(?:^|\\s)"+a+"(?!\\S)","i")}function CS_has_class(a,b){return a.className.match(CS_re_class(b))?!0:!1}function CS_add_class(a,b){a.classList.add(b)}function CS_del_class(a,b){a.classList.remove(b)}function CS_is_descendant(a,b){if(b&&b!=a)for(b=b.parentNode;null!=b;){if(b==a)return!0;b=b.parentNode}return!1}
function CS_get_children_by_id(a,b,c=!1,d=!0){function e(g){for(let l=0;l<g.children.length&&(0==f.length||!d)&&(g.children[l].id!=b||(f.push(g.children[l]),!d));l++)c&&e(g.children[l])}let f=[];e(a);return 0<f.length?d?f[0]:f:!1};/*
 Encrypt a string.
 @partam salt: the encryption key,
 @param encoded: the decrypted string,
 @return string: the encrypted string.
 Decrypt a string.
 @partam salt: the encryption key,
 @param encoded: the encrypyed string,
 @return string: the decrypted string.
*/
function CS_crypt(a,b){}function CS_decrypt(a,b){};/*
 Bind the details tag for firefox.
 @param details: a details tag,
 @return void.
 change the state of the details tag.
 @param open: set the satte to opened if true, and to closed
 otherwise,
 @return void.
*/
function CS_bind_details(a){function b(f){f?(CS_del_class(a,"CS_details_closed"),CS_add_class(a,"CS_details_opened")):(CS_add_class(a,"CS_details_closed"),CS_del_class(a,"CS_details_opened"))}for(var c="undefined"!=typeof a.attributes.open,d=0;d<a.children.length;d++){var e=a.children[d];if("summary"==e.tagName.toLowerCase()){e.onclick=function(){b(CS_has_class(a,"CS_details_closed"))};break}}b(c)};/*
 Create a dialog with either a html or a dom element as content.
 @param options: associative objects as
 {
   blur:     true to blur the web page
   class:    additional class name
   content:  the html or dom element
   close:    'default':  the dialog is closed either with the cros button,
                         with a click or a key or programmaticaly
             'explicit': the dialog is close by the cross button or
                         prommatically,
             'none'    : the dialog is closable programmatically only,
   modal:    true is the dialog is modal
   onbind:   onbind (dialog): called when the dialog is attached to the
                              document
   onclose:  called on close
   parent:   the parent dom element,
   styles:   the optional styles of the dilog as a CSS string or as an object,
 }
 return void
 close a dialog box.
 @param element: the dialog or one of its child element,
 @return void.
*/
function CS_dialog(a){function b(h,k){let p=k.clientX,n=k.clientY,t=h.style.zindex,u=h.offsetLeft,y=h.offsetTop,m=document.onmouseup,r=document.onmousemove;console.log("Mouse pressed for move; click="+p+", "+n);CS_stop_propagation(k);h.style.zindex=1E4;document.onmouseup=function(v){console.log("Mouse released for move");CS_stop_propagation(v);document.onmousemove=r;document.onmouseup=m;h.style.zindex=t};document.onmousemove=function(v){console.log("Mouse moved on move");CS_stop_propagation(v);h.style.left=
u+(v.clientX-p)+"px";h.style.top=y+(v.clientY-n)+"px"}}function c(h,k,p){let n=p.clientX,t=p.clientY,u=h.style.zindex,y=k.offsetLeft,m=k.clientWidth,r=k.offsetTop,v=k.offsetHeight,w=k.onmousedown,x=document.onmouseup,z=document.onmousemove;console.log("Mouse pressed for resize");let B,E,D=window.getComputedStyle(k);B=parseFloat(D.paddingLeft)+parseFloat(D.paddingRight);E=parseFloat(D.paddingTop)+parseFloat(D.paddingBottom);h.style.zindex=1E4;CS_stop_propagation(p);document.onmouseup=function(A){console.log("Mouse released for resize");
CS_stop_propagation(A);k.onmousedown=w;document.onmousemove=z;document.onmouseup=x;h.style.zindex=u};document.onmousemove=function(A){CS_stop_propagation(A);var C=A.clientX-n;let F=m-B+h.x_coef*C;10<F&&(k.style.width=F+"px",-1==h.x_coef&&(k.style.left=y+C+"px"));A=A.clientY-t;C=v-E+h.y_coef*A;10<C&&(k.style.height=C+"px",-1==h.y_coef&&(k.style.top=r+A+"px"))}}function d(h){CS_animate(10,400,k=>{k=9-k;0<k?(a.blur&&CS_blur_all(h,1+k/2),h.style.opacity=k/10):(a.modal&&CS_modal_capture(!1),a.blur&&CS_blur_all(h,
0),h.parentNode&&h.parentNode.removeChild(h));return!0})}Object.keys(a).forEach(h=>{switch(h){case "close":switch(a[h]){case "default":case "explicit":case "none":break;default:console.error('Error: unexepected close value "',a[h],'"')}case "blur":case "class":case "content":case "modal":case "onbind":case "onclose":case "parent":case "styles":break;default:console.error('Error: unexepected option name "',h,'"')}});let e=document.createElement("div");CS_add_class(e,"CS_dialog");e.close=function(h){d(h)};
if(a.modal){var f=document.createElement("div");e.appendChild(f);CS_add_class(f,"CS_overlay")}let g=document.createElement("div");e.appendChild(g);CS_add_class(g,"CS_frame");a.class&&CS_add_class(g,a.class);if(a.styles)if("object"==typeof a.styles){f=Array.isArray(a.styles)?a.styles.keys():Object.keys(a.styles);for(var l of f)g.style[l]=a.styles[l]}else"string"==typeof a.styles&&(g.style.cssText=a.styles);g.style.cursor="all-scroll";g.onmousedown=function(h){if(h.explicitOriginalTarget==this||h.srcElement==
this)CS_stop_propagation(h),b(g,h)};l=[{name:"frame_tl",x_coef:-1,y_coef:-1},{name:"frame_bl",x_coef:-1,y_coef:1},{name:"frame_br",x_coef:1,y_coef:1}];for(f=0;f<l.length;f++){let h=l[f],k=document.createElement("div");g.appendChild(k);CS_add_class(k,"CS_"+h.name);k.x_coef=h.x_coef;k.y_coef=h.y_coef;k.onmousedown=function(p){CS_stop_propagation(p);c(this,g,p)}}"none"!=a.close&&(l=document.createElement("span"),g.appendChild(l),CS_add_class(l,"CS_close"),l.id="close",l.innerHTML="&times;",l.innerHTML=
"&nbsp;",l.onclick=function(){d(e)});let q=document.createElement("form");g.appendChild(q);CS_add_class(q,"CS_content");q.style.cursor="default";q.method="post";q.onsubmit=function(){if(a.onclose)a.onclose(q);d(e);return!1};"string"==typeof a.content?q.innerHTML=a.content:q.appendChild(a.content);a.modal&&CS_modal_capture(g,function(h){a.close&&"none"!=a.close||d(e)},!0);e.style.opacity=0;a.parent?(a.parent.appendChild(e),a.parent.position=null):document.body.appendChild(e);if(a.onbind)a.onbind(e);
CS_animate(10,400,h=>{a.blur&&CS_blur_all(e,1+h/2);e.style.opacity=h/10;return!0})}function CS_dialog_close(a){a&&(CS_has_class(a,"CS_dialog")?a.close(a):CS_dialog_close(a.parentNode))}
function CS_color_picker(a,b,c,d,e,f){let g=document.createElement("table");CS_add_class(g,"CS_color-picker");let l=0,q=0;for(var h=0;4>h;h++)for(var k=0;2>k;k++){l++;q=0;var p=document.createElement("tr");for(let n=0;7>n;n++){q++;let t=document.createElement("td");t.style.backgroundColor="rgb("+Math.round(255*k)+", "+Math.round(255*h/3)+", "+Math.round(255*n/6)+")";c&&(t.onclick=function(u){c(u.target.style.backgroundColor)});p.appendChild(t)}g.appendChild(p)}h=document.createElement("tr");l++;for(k=
0;k<q;k++)p=document.createElement("td"),p.style.backgroundColor="rgb("+Math.round(255*k/(q-1))+", "+Math.round(255*k/(q-1))+", "+Math.round(255*k/(q-1))+")",c&&(p.onclick=function(n){c(n.target.style.backgroundColor)}),h.appendChild(p);g.appendChild(h);a&&(h=document.createElement("th"),h.colSpan=q,h.innerHTML=a,g.insertBefore(h,g.firstChild));f||(f="");CS_dialog({content:g,onclose:b,model:d,blur:e,styles:f+("width: "+3*q+"em; height: "+2*l+"em")})};/*
 Return true if the given element is a CS_editable input.
 @param elem: the node,
 @return bool: the status.
 CS_editable widget submission callback - the goal of the function is
 to remove all the otehr CS_editable inputs in order to simplify the
 form query and to submit the form.
 @param event: the calling event,
 @return void.
 Bind the editable wigets in the document.
 1?) Form embeded element
     Form embedded element are put inside a form. When edited, the generated
     input remains in the document with the display none style.
     Its value is sents to the form on submit event, generally with the
     button.
     An editable element is embedded if it does not have the ajax attribute
     with the ajax url to send the new value...
     A a standard form element, it must have a name that is taken from the
     attributes.
 2?) Ajaxed element
 @param elem: the editable element,
 @return void.
 Bind the editable wigets in the document.
 @return void.
*/
function CS_editable_is_input(a){switch(a.nodeName){case "INPUT":case "SELECT":return!0;default:return!1}}function CS_editable_submit(a){a=a.target;let b=document.getElementsByClassName("CS_editable");for(let c=0;c<b.length;c++){let d=CS_editable_is_input(b[c])?b[c]:b[c].input;"undefined"!=typeof d&&d!=a&&(d.remove(),d==b[c]&&c--)}"INPUT"!=a.tagName||"checkbox"!=a.type&&"radio"!=a.type||(a.type="text",a.value=a.checked?"yes":"no");a.form.submit()}
function CS_bind_editable(a){if(!a.input&&a.onchange!=CS_editable_submit)if(CS_editable_is_input(a))a.onchange=CS_editable_submit;else{var b="undefined"!=typeof a.attributes.get_input?a.attributes.get_input.value:!1;if(!b){for(let c=0,d=a.childNodes.length;!a.input&&c<d;c++)CS_editable_is_input(a.childNodes[c])&&(a.input=a.childNodes[c],a.input.remove());a.input||(a.input=document.createElement("INPUT"),"undefined"!=typeof a.attributes.name&&(a.input.name=a.attributes.name.value),a.input.value=a.innerHTML)}a.org_onclick=
a.onclick;a.onclick=function(c){let d=CS_now();console.log("editable clicked");if("undefined"==typeof a.last_click||0==a.last_click||800<d-a.last_click)a.last_click=d,a.org_onclick&&a.org_onclick(c);else{console.log("do the editable job");a.last_click=0;let e=b?eval(b):a.input;e.onchange=function(f){if("undefined"!=typeof a.attributes.ajax){f="value";"undefined"!=typeof a.attributes.name&&(f=a.attributes.name.value);let g={};Object.defineProperty(g,f,a.input.value);CS_ajax_load({url:a.attributes.ajax.value,
args:g,onsuccess:function(){a.innerHTML=a.input.value},onerror:function(){CS_notify("unable to rename the database","error")},synchronous:!1,binary:!1,force:!1})}else"undefined"!=typeof this.form?CS_editable_submit(f):alert("error: cannot submit the change, no form and no ajax specified")};a.appendChild(e);e.focus();CS_modal_capture(e,function(){console.log("remove editable input");e.remove()},!1)}}}}
function CS_bind_editables(){let a=document.getElementsByClassName("CS_editable");for(let b=0;b<a.length;b++)CS_bind_editable(a[b])};/*
 Allow to know if passive event handlers are managed in this browser.
 Return the mouse position from the last event.
 @param event: the event,
 @return {x: x, y: y}.
 Detect if the escape key is pressed on the event.
 @param event: the event,
 @return true or false.
 Flush the top capture or all the captures if all is true.
 @param all: if true, pop all the captures,
 @return void.
 Modal capture event handler callback.
 @param event: the event,
 @return void.
 Capture the events of the document for a modal interaction.
 When this modal detector detects an event that should close the
 interaction, it calls the callback function; the callback function
 should do what it has to do and release its capture.
 The caller, on some event, can releases by itself the capture;
 then it calls this function with false. The callback is not
 called...
 @param target: the modal target, of false to reset the capture,
 @param callback: optional callback called on release with target
 as argument,
 @param noscroll: if true, the web page is prevented to scroll,
 @return integer: the capture count.
 Sleep for the given delay in ms.
 @param delay: the delay to wait,
 @return Promiose: a primise object.
 Debounce a function call: the function is called
 after the given delay delay in IDLE.
 https://remysharp.com/2010/07/21/throttling-function-calls
 @param fn: the function,
 @param delay: the delay in milliseconds,
 @return void.
 Throttle a function call: the function is called
 at a frequency that no more than the given threshhold delay.
 https://remysharp.com/2010/07/21/throttling-function-calls
 @param fn: the function,
 @param threshhold: the delay in milliseconds,
 @param scope: the scope,
 @return void.
 Animate a transition.
 @param steps: number of steps,
 @param duration: duration of the animation in milliseconds,
 @param callback: the animation callback with the current step number and that
 returns a boolean as true to continue the animation and false to stop it
 as argument in [0..(steps - 1)],
 @return false.
 Drag in the screen.
 @param element: the element where to drag,
 @param onstart: function (mouse): boolean
 called when the user clicks into the scene to start the drag, with the
 mouse position, the function returns true to continue dragging or false,
 @param ondrag: function (mouse_start, mouse_delta): boolean
 called on dragging with the intial drag mouse position and the delta in
 the mouse position, the function returns true to continue dragging or
 false,
 @param onend: function (mouse, dragged): void
 called when the user release the mouse with the mouse position the
 dragging status,
 @return void.
 Stop the drag process.
 @param event: the event that caused the stop,
 @param abandon: if true, this is an abandon, do not call onend()
 callback,
 @return void;
 Mouse move event handler.
 @param event: the event,
 @return true;
 Mouse up event handler.
 @param event: the event,
 @return true;
 Key down event handler.
 @param event: the event,
 @return true;
 Key up event handler.
 @param event: the event,
 @return true;
*/
var CS_has_passive_event_handers=function(){var a=!1,b=function(){};try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",b,c);window.removeEventListener("test",b,c)}catch(d){}return a}();
function CS_getxy(a){var b=CS_get_document_scroll("top");var c=CS_get_document_scroll("left");"undefined"===typeof a.clientX?(c=a.pageX+c,b=a.pageY+b):(c=a.clientX+c,b=a.clientY+b);console.log("event.clientX/Y {"+a.clientX+", "+a.clientY+"}");console.log("event.pageX/Y {"+a.pageX+", "+a.pageY+"}");console.log("mouse at {"+c+", "+b+"}");return{x:c,y:b}}function CS_is_escape_key(a){return"key"in a?"Escape"==a.key:27==a.keyCode}
function CS_add_event(a,b,c,d,e){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(f){a["e"+b+c](f);d&&CS_stop_propagation(f)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,CS_has_passive_event_handers?{capture:d,passive:!0}:d)}function CS_del_event(a,b,c,d){a.detachEvent?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):a.removeEventListener(b,c,d)}
function CS_stop_propagation(a){a.stopPropagation?a.stopPropagation():a.returnValue=!1;CS_has_passive_event_handers||(a.preventDefault&&a.preventDefault(),null!=a.cancelBubble&&(a.cancelBubble=!0));return!1}function CS_clicked_mouse_button(a){return null==a.which?2>a.button?"left":4==a.button?"middle":"right":2>a.which?"left":2==a.which?"middle":"right"}
function CS_modal_pop(a){if("undefined"!=typeof document.CS_modals&&document.CS_modals.length)for(var b;b=document.CS_modals.pop();)if(b.callback&&b.callback(b.elem),!a)return b;return!0}
function _CS_modal_capture(a){switch(a.type){case "mousedown":var b=document.CS_modals[document.CS_modals.length-1];if(!0===b||"undefined"!=typeof b&&"undefined"!=typeof b.elem&&!CS_is_descendant(b.elem,a.target))CS_stop_propagation(a),CS_modal_pop(!1);break;case "keydown":CS_is_escape_key(a,!0)&&CS_modal_pop(!0)}}
function CS_modal_capture(a,b,c){if(a){if("undefined"==typeof document.CS_modals||0==document.CS_modals.length)document.CS_modals=[],document.CS_org_scroll_top=CS_get_document_scroll("top"),CS_add_event(document,"keydown",_CS_modal_capture,!0),CS_add_event(document,"mousedown",_CS_modal_capture,!0);document.CS_modals.push({elem:a,callback:b})}else if(CS_modal_pop(!1),0==document.CS_modals.length)return CS_has_class(document.body,"CS_noscroll")&&(CS_del_class(document.body,"CS_noscroll"),CS_set_document_scroll("top",
document.CS_org_scroll_top)),CS_del_event(document,"keydown",_CS_modal_capture,!0),CS_del_event(document,"mousedown",_CS_modal_capture,!0),0;return document.CS_modals.length}function CS_alarm(a,b){let c=setTimeout(function(){b(c)},a);return c}function CS_cancelAlarm(a){clearTimeout(a)}var CS_now=function(){var a=window.performance||{};a.now=function(){return a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow||function(){return(new Date).getTime()}}();return a.now()};
function CS_sleep(a){return new Promise(b=>setTimeout(b,a))}function CS_debounce(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(d,e)},b)}}function CS_throttle(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,l=arguments;d&&g<d+b?(clearTimeout(e),e=setTimeout(function(){d=g;a.apply(f,l)},b)):(d=g,a.apply(f,l))}}
function CS_animate(a,b,c){if(-1<CS_get_browser().indexOf("firefox"))c(a-1);else{var d=function(f){c(f)&&f<a-1&&CS_sleep(e).then(()=>{d(f+1)})},e=b/a;d(0)}}
function CS_drag(a,b,c,d){function e(p,n){console.log("leave dragging handler with"+h?" mouse dragged":"out dragging");CS_stop_propagation(p);CS_del_event(a,"mousemove",f,!0);CS_del_event(a,"mouseup",g,!0);CS_del_event(a,"keydown",l,!0);CS_del_event(a,"keyup",q,!0);!n&&d&&(p=CS_getxy(p),d(p,h))}function f(p){CS_stop_propagation(p);let n=CS_getxy(p),t={x:n.x-k.x,y:n.y-k.y};1==h||5<Math.abs(t.x)+Math.abs(t.y)?(h?console.log("mouse dragged"):b&&!b(n)?e(p,!0):(console.log("start to drag"),h=!0),h&&c&&
!c(k,t)&&(console.log("dragging interrupted by callback"),e(p,!0))):console.log("mouse moved");return!0}function g(p){e(p,!1);return!0}function l(p){return!0}function q(p){"Escape"==p.key&&e(p,!0);return!0}let h=!1,k=CS_getxy(window.event);CS_add_event(a,"mousemove",f,!0);CS_add_event(a,"mouseup",g,!0);CS_add_event(a,"keydown",l,!0);CS_add_event(a,"keyup",q,!0)};/*
 Return an array ["name" => "value"] from the form elements.
 @param form: the form,
 @param init: the initial array,
 @return array: the array.
 Called on the result of the connection validation.
 The status can be an error or the success...
 @param form: the form,
 @param result: the validation result, that is HTML,
 @return void.
 Display a form.
 @param result: the form html,
 @param submit: submit callback,
 @return void.
*/
function CS_get_form_elements(a,b){b=Object.assign({},b);for(var c=0;c<a.elements.length;c++){var d=a.elements[c];d.name&&(b[d.name]="checkbox"==d.type||"radio"==d.type?d.checked?d.value:!1:d.value)}return b}
function CS_ajax_form(a,b,c,d,e,f,g){function l(h,k){console.log("test_form_result: ");console.log(k);var p=document.createElement("div");p.innerHTML=k;h||(h=document.createElement("form"),h.closeit=function(){});for(var n=0;n<h.children.length;n++)k=h.children[n],"p"==k.tagName.toLowerCase()&&(CS_has_class(k,"debug")||CS_has_class(k,"info"))&&(h.removeChild(k),n--);var t=h.firstChild;for(n=0;n<p.children.length;n++)if(k=p.children[n],CS_has_class(k,"CS_cookie")){for(var u=n=!1,y=!1,m=0;m<k.children.length;m++)CS_has_class(k.children[m],
"name")?n=k.children[m].innerHTML:CS_has_class(k.children[m],"value")?u=k.children[m].innerHTML:CS_has_class(k.children[m],"days")&&(y=parseInt(k.children[m].innerHTML));n&&(u?CS_set_cookie(n,u,y):CS_reset_cookie(n));break}for(n=0;n<p.children.length;n++)if(k=p.children[n],CS_has_class(k,"CS_success")){h.closeit();CS_modal_pop(!0);e&&e(k.innerHTML);k.innerHTML&&CS_notify(k.innerHTML,"success");break}else if(CS_has_class(k,"CS_error")){f&&f(k.innerHTML);k.innerHTML&&CS_notify(k.innerHTML,"error");
break}else h.insertBefore(k,t),n--}function q(h,k){function p(){CS_modal_capture(!1);t.parentElement&&(a?a:document.body).removeChild(t)}console.log("display_form: ");console.log(h.replace(/\x3c!--.*--\x3e\n/gi,"").replace(/\x3c!--.*--\x3e/gi,""));var n=document.createElement("div");n.innerHTML=h;for(var t=!1,u=0,y=0,m=0;m<n.children.length;m++){var r=n.children[m];if("form"==r.tagName.toLowerCase()){u=m;t=r;y=t.style.visibility;t.style.visibility="hidden";t.onsubmit=function(v){CS_stop_propagation(v);
k(t);return!1};(a?a:document.body).appendChild(t);break}}if(t){for(m=0;m<n.children.length;m++)r=n.children[m],"p"==r.tagName.toLowerCase()&&(CS_has_class(r,"debug")||CS_has_class(r,"info"))&&(m<u?t.insertBefore(r,t.firstChild):t.appendChild(r));d&&d(t);CS_ensure_visible(t);t.style.visibility=y;t.closeit=p;for(m=0;m<t.elements.length;m++)if(h=t.elements[m],h.autofocus){h.focus();break}CS_modal_capture(t,p)}else l(!1,h)}CS_ajax_load({url:b,args:c,onsuccess:function(h){q(h,function(k){c=CS_get_form_elements(k,
c);console.log("call form on success with args = ",c);CS_ajax_load({url:b,args:c,onsuccess:function(p){l(k,p)},synchronous:g})})},onerror:f});return!1};function CS_mask_image(a,b){let c=document.createElement("div");CS_add_class(c,"CS_mask_image");let d=document.createElement("img");d.src=a;c.appendChild(d);a=document.createElement("div");a.setAttribute("style",'-webkit-mask-image: url("'+(d.src+'");background-color: ')+b+";opacity: 0.7;height: 90%;");c.appendChild(a);return c};/*
 Return the extension of a filename.
 @param filename: the file name,
 @return string: the extension.
 Parse and evaluate the javascript scripts that are embedded
 in the given html source text.
 @param source: the html source text,
 @param callback: the callback function to call when the script is loaded,
 notice that the script is also called if the file is already loaded,
 @return void.
 Create an Ajax request.
 @return XHR: the ajax request.
 Watch a change to a property of an object.
 @param object: the object to watch
 @param property: the property to scan,
 @return void.
 Manage the cookie GDPR authorizaton.  Return the GDPR cookie authorizaton.
 @return boolean: the authorizaton status.
 Set a cookie.
 @param name: the cookie name,
 @param value: the cookie value,
 @param days: the number of validity days, or 0,
 @return void.
 Get a cookie.
 @param name: the cookie name,
 @return string: the cookie value or false.
 Delete a cookie if the name is provided, or all the cookies otherwise.
 @param name: the cookie name or false,
 @return void.
 Return an object that gathers all the local cookie.
 @return object: an association object.
*/
function CS_extension(a){return a.slice((a.lastIndexOf(".")-1>>>0)+2)}
function CS_parse_scripts(a,b){let c=/<script[^]*?(src="([\s\S]*?)")*>([\s\S]*?)<\/script>/gmi,d,e=!1;for(;d=c.exec(a);)if("string"==typeof d[1]&&""!=d[1].trim()&&"string"==typeof d[2]&&""!=d[2].trim())CS_load_file_dynamically(d[2],b);else if("string"==typeof d[3]&&""!=d[3].trim())try{eval(d[3]),e=!0}catch(f){console.log("The evaluation of:",d[3]),console.log("causes an error:",f.message)}e&&CS_call_ready();for(c=/<link[\s\S]*?text\/css[\s\S]*?href="([\s\S]*?)"[\s\S]*?\/>/gmi;d=c.exec(a);)"string"==
typeof d[1]&&""!=d[1].trim()&&CS_load_file_dynamically(d[1],b)}function CS_download(a){let b=document.createElement("iframe");b.style.display="none";document.body.appendChild(b);(b.contentDocument||b.contentWindow.document).location=a}
function CS_download_data(a,b){let c=document.createElement("a");c.style.display="none";document.body.appendChild(c);var d=a.indexOf("base64,");if(0<=d){{var e=a.substr(d+7);a=(a=a.substr(0,d-1))||"";d=512;e=atob(e.replace(/(\r\n|\n|\r|\s+)/gm,""));let g=[];for(let l=0;l<e.length;l+=d){var f=e.slice(l,l+d);let q=Array(f.length);for(let h=0;h<f.length;h++)q[h]=f.charCodeAt(h);f=new Uint8Array(q);g.push(f)}a=new Blob(g,{type:a})}}else a=new Blob([a],{type:"text/plain; charset=x-user-defined"});a=window.URL.createObjectURL(a);
c.href=a;c.download=b;c.click();window.URL.revokeObjectURL(a)}function CS_copy_to_clipboard(a,b){if(!document.body||!navigator.clipboard)return!1;switch(a){case "text":return navigator.clipboard.writeText&&navigator.clipboard.writeText(b);default:case "image":return a=document.createElement("img"),a.src=b,document.body.appendChild(a),b=document.createRange(),b.setStartBefore(a),b.setEndAfter(a),b.selectNode(a),window.getSelection().addRange(b),document.execCommand("Copy"),a.remove(),!0}}
function CS_create_xhr(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){const a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(let b in a)try{return new ActiveXObject(a[b])}catch(c){}}window.alert("unable to load ajax");return null}var CS_ajax_error_notified=!1;
function CS_ajax_load(a){Object.keys(a).forEach(d=>{switch(d){case "args":case "as_json":case "binary":case "force":case "headers":case "method":case "onerror":case "onprogress":case "onsuccess":case "synchronous":case "url":break;default:console.error('Error: unexepcted option name "',d,'"')}});if(a.url){a.method||(a.method="POST");switch(a.method){case "post":case "POST":case "get":case "GET":break;default:return}if(a.args)if(a.as_json)var b=JSON.stringify(a.args);else if(b=window.FormData?new FormData:
!1)for(let d in a.args)b.append(d,args[d]);else{b="";for(let d in a.args)0<b.length&&(b+="&"),b+=d+"="+encodeURIComponent(a.args[d])}else b=null;var c=CS_create_xhr();a.onprogress&&"upload"in c&&(c.upload.onprogress=function(d){if(d.lengthComputable)a.onprogress(d.loaded/d.total*100|0)});c.onloadstart=function(){console.log("start to load ",a.url," ",a.args);a.synchronous&&(document.causal_wait_count?document.causal_wait_count++:(document.causal_wait_count=1,document.causal_wait_timer=window.setTimeout(function(){document.body.style.cursor=
"wait"},1E3)))};c.onloadend=function(){console.log("end to load ",a.url," ",a.args);a.synchronous&&(1==document.causal_wait_count&&(window.clearTimeout(document.causal_wait_timer),document.body.style.cursor=null),document.causal_wait_count--)};c.onload=function(){switch(c.status){case 200:if(a.onsuccess){let d=c.getAllResponseHeaders(),e={};d&&d.split("\n").forEach(f=>{f.trim()&&(f=f.split(":"),e[f[0].trim()]=f[1].trim())});if(a.binary)a.onsuccess(new Uint8Array(c.response),e);else a.onsuccess(c.responseText,
e)}break;default:if(console.log("Ajax error: "+c.statusText+": "+a.url),a.onerror)a.onerror(c.statusText)}};c.open(a.method,a.url,1==a.synchronous?!1:!0);a.binary&&(c.responseType="arraybuffer");a.headers&&Object.entries(a.headers).forEach(d=>{c.setRequestHeader(d[0],d[1])});b&&b instanceof String&&(headers&&headers.hasOwnProperty("Content-Type")||c.setRequestHeader("Content-Type",a.as_json?"application/json; charset=UTF-8":"application/x-www-form-urlencoded; charset=UTF-8"));a.force&&c.setRequestHeader("Cache-Control",
"no-cache, no-store, must-revalidate");c.send(b)}}function CS_loaded(a){let b=document.getElementsByTagName("head")[0]||document.documentElement;for(let c=0,d=b.children.length;c<d;c++){let e=b.children[c];if("LINK"==e.nodeName&&e.href&&-1!=e.href.search(a)||"SCRIPT"==e.nodeName&&e.src&&-1!=e.src.search(a))return!0}return!1}
function CS_load_file_dynamically(a,b,c){var d=CS_extension(a);if(CS_loaded(a))b&&b();else if(0==a.indexOf("file://"))b=new FileReader,b.onload=function(e){e=e.target.result;let f=document.createElement("div");f.innerHTML=e;document.body.appendChild(f)},b.readAsText(a);else{if("js"==d)d=document.createElement("script"),d.setAttribute("type","text/javascript"),d.setAttribute("src",a),c&&(d.setAttribute("async",!1),d.async=!1),d.onload=function(e){return function(){CS_call_ready();e&&e()}}(b),a=document.getElementsByTagName("head")[0];
else if("css"==d)d=document.createElement("link"),d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",a),c&&d.setAttribute("async",!1),b&&(d.onload=b),a=document.getElementsByTagName("head")[0];else return;"undefined"!=typeof d&&a.appendChild(d);return!0}}
function CS_dump_log(a,b,c){void 0==b&&(b=0);void 0==c&&(c=a.length);if(!(b>a.length)){b+c>a.length&&(c=a.length-b);var d="",e="";for(let g=1;b<c;b++,g++){20<g&&(console.log(d+"   "+e),g=1,e=d="");var f=a[b].toString(16);2>f.length&&(f="0"+f);d+=f+(0==g%4&&g&&20!=g?" | ":" ");f=String.fromCharCode(a[b]);f=CS_is_print(f)?f:".";e+=f+(0==g%4&&g?" ":"")}d&&console.log(d+"   "+e)}}
function CS_watch(a,b){let c="$_"+b+"_$";a[c]=a[b];Object.defineProperty(a,b,{get:function(){return a[c]},set:function(d){console.log("watch change: setting "+b+" to "+d);a[c]=d}})}var CS_cookie_allowed=!1,CS_cookie_allowed_checked=!1;function CS_is_cookie_allowed(){CS_cookie_allowed_checked||(CS_cookie_allowed="true"==CS_get_cookie("gdpr"),CS_cookie_allowed_checked=!0);return CS_cookie_allowed}
function CS_set_cookie_allowed(){CS_cookie_allowed_checked=CS_cookie_allowed=!0;CS_set_cookie("gdpr","true",400)}function CS_set_cookie(a,b,c){if(CS_is_cookie_allowed()){var d="";c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString());document.cookie=a+"="+b+d+"; path=/;SameSite=Strict"}}
function CS_get_cookie(a){a+="=";let b=document.cookie.split(";");for(let c=0;c<b.length;c++){let d=b[c];for(;" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}
function CS_reset_cookie(a){if(a)CS_is_cookie_allowed()&&CS_set_cookie(a,"",-1);else{a=CS_cookie_allowed;let b=CS_cookie_allowed_checked;CS_cookie_allowed_checked=CS_cookie_allowed=!0;let c=document.cookie.split("; ");for(let d=0;d<c.length;d++)CS_set_cookie(c[d],"",-1);CS_cookie_allowed=a;CS_cookie_allowed_checked=b}}
function CS_get_cookies(){let a={};if(document.cookie&&""!=document.cookie){let b=document.cookie.split(";");for(let c=0;c<b.length;c++){let d=b[c].split("=");d[0]=d[0].replace(/^ /,"");a[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}}return a};/*
 local string as an array of array such as
 {"english string": {"language": "tranaslated string", ...}, ...}
 local language to use as "en", "fr", "it", ...
 Debug local  dummy translate a string.
 @param string: the string to translate,
 @return string: the translated string.
 translate a string.
 @param string: the string to translate,
 @return string: the translated string.
*/
var ___strings={},___language=document.causal_language?document.causal_language:"en",___debug_local=!1;function __(a){return a}
function ___(a){"Disconnect"==a&&alert(a);return ___debug_local?"undefined"==typeof ___strings||"undefined"==typeof ___language?a:"en"==___language?"#"+a:"undefined"==typeof ___strings[a]?"?"+a:"undefined"==typeof ___strings[a][___language]?(console.warn('String "'+a+'" is not translated'),"?"+a):"@"+CS_strFromUTF8(___strings[a][___language]):"undefined"==typeof ___strings||"undefined"==typeof ___language||"en"==___language||"undefined"==typeof ___strings[a]||"undefined"==typeof ___strings[a][___language]?
a:CS_strFromUTF8(___strings[a][___language])};/*
 Close a menu from a child element.
 @param elem: the child element,
 @return void.
 Open a menu from a child element.
 @param elem: the child element,
 @return void.
 Bind the menus of the page.
 @param elem: the menu element to bind,
 @param onclose: optional callback called when the menu is closed,
 @param level: the level of the menu,
 @return void.
 Onmouseenter callback bound to the li element of the menus.
 The purpose of this enter/leave management is to prevent to
 close the menu if the user go out of the menu for a small
 time when he wants to reach a submenu.
 @param event: the event,
 @return void.
 Onmouseleave callback bound to the li element of the menus.
 @param event: the event,
 @return void.
*/
function CS_close_menu(a){CS_del_class(a,"CS_over");"UL"==a.tagName&&CS_has_class(a,"CS_level-1")||("ul"==a.tagName.toLowerCase()&&(a.style.display="none",setTimeout(function(){a.style.display=null},500)),CS_close_menu(a.parentNode))}function CS_open_menu(a){"UL"==a.tagName&&CS_has_class(a,"CS_level-1")||(CS_add_class(a,"CS_over"),CS_open_menu(a.parentNode))}
function CS_bind_menu(a,b,c){function d(g){g=g.target;g.enter_alarm&&(CS_cancelAlarm(g.enter_alarm),g.enter_alarm=!1);CS_add_class(g,"CS_over")}function e(g){function l(){q.enter_alarm=!1;CS_del_class(q,"CS_over")}let q=g.target;(g=g.toElement)&&q.parentNode==g.parentNode.parentNode?l():q.enter_alarm=CS_alarm(500,l)}if("undefined"==typeof c){c=0;for(var f=a;f;f=f.parentNode)switch(f.tagName.toLowerCase()){case "li":case "a":break;case "ul":c++;break;default:f=!1}}switch(a.tagName.toLowerCase()){case "li":for(f=
0;f<a.children.length;f++)if("ul"==a.children[f].tagName.toLowerCase()){CS_add_class(a,"CS_submenu");break}a.onmouseenter=d;a.onmouseleave=e;break;case "a":a.binded||(a.org_onclick=a.onclick,a.onclick=function(g){CS_stop_propagation(g);b&&b(a);null!=a.org_onclick?("touch"==g.pointerType&&(a.close_alarm&&CS_cancelAlarm(a.close_alarm),a.close_alarm=CS_alarm(1800,function(){a.close_alarm=!1;CS_close_menu(a)})),a.org_onclick(g)):"touch"==g.pointerType&&(CS_open_menu(a),a.focus())})}"ul"==a.tagName.toLowerCase()&&
(c+=1);CS_has_class(a,"CS_level-\\d*")?a.className=a.className.replace(/(?:^|\s)CS_level-\d*(?!\S)/g," CS_level-"+c):CS_add_class(a,"CS_level-"+c);a.binded=!0;for(f=0;f<a.children.length;f++)CS_bind_menu(a.children[f],b,c)}
function menu(a,b,c){let d=document.createElement("div");CS_add_class(d,"CS_popmenu");d.innerHTML=a;c?(c.left&&(d.style.left=c.left),c.top&&(d.style.top=c.top),c.width&&(d.style.width=c.width),c.height&&(d.style.height=c.height)):(d.style.left=window.event.clientX+"px",d.style.top=window.event.clientY+"px");CS_bind_menu(d,function(f){b&&b();d.parentNode.removeChild(d)});let e=document.onmousedown;document.onmousedown=function(f){console.log("Mouse released from menu");f.explicitOriginalTarget&&CS_is_descendant(d,
f.explicitOriginalTarget)||f.srcElement&&CS_is_descendant(d,f.srcElement)||(b&&b(),CS_stop_propagation(f),d.parentNode.removeChild(d),document.onmousedown=e)};document.body.appendChild(d)};/*
 Notify the user with an element of a html content.
 @param element: DOM element or HTML content,
 @param type: type of notification in "error", "success" and "warning",
 @return void.
*/
function CS_notify(a,b){function c(){CS_del_event(document.body,"mousedown",c,!0);CS_del_event(document.body,"mousemove",c,!0);CS_del_event(document.body,"keydown",c,!0);e.style.opacity=0;CS_alarm(5E3,function(){try{document.body.removeChild(e)}catch(f){}})}switch(b){case "error":case "success":case "warning":break;default:alert("Error in causal_notify.js(32): ",'invalid notification type "',b,'"');return}var d=document.getElementsByClassName("CS_notify");for(let f=0;f<d.length;f++)d[f].parentNode.removeChild(d[f]);
let e=document.createElement("div");CS_add_class(e,"CS_notify");e.style.opacity=0;"string"==typeof a?e.innerHTML=a:e.appendChild(a);b||(b="success");for(a=0;a<e.children.length;a++)if(d=e.children[a],CS_has_class(d,"CS_notify")){for(let f=0,g=["error","success","warning"];f<g.length;f++)CS_has_class(d,"CS_"+g[f])&&(b=g[f],CS_del_class(d,"CS_"+g[f]));CS_del_class(d,"CS_notify")}CS_add_class(e,"CS_"+b);switch(CS_get_os()){case "ios":case "android":CS_alarm(3E3,c);default:CS_alarm(800,function(){CS_add_event(document.body,
"mousedown",c,!0);CS_add_event(document.body,"mousemove",c,!0);CS_add_event(document.body,"keydown",c,!0)})}document.body.appendChild(e);e.style.opacity=1};/*
 print a HTML contents. Notice that the contens may not contain the
 <html> and <body> that are automatically added.
 @param contents: the html contents to print,
 @erturn void.
*/
function CS_print_html(a){var b=document.createElement("iframe");b.name="frame1";b.style.position="absolute";b.style.top="-1000000px";document.body.appendChild(b);var c=b.contentWindow?b.contentWindow:b.contentDocument.document?b.contentDocument.document:b.contentDocument;c.document.open();-1==a.indexOf("<html")&&c.document.write("<html>");-1==a.indexOf("<body")&&c.document.write("<body>");c.document.write(a);-1==a.indexOf("</html>")&&c.document.write("</html>");-1==a.indexOf("</body>")&&c.document.write("</body>");
c.document.close();setTimeout(function(){window.frames.frame1.focus();window.frames.frame1.print();document.body.removeChild(b)},500)};/*
 Bind the slide show - ie: rearrange the elements, create the buttons
 and the indicators.
 The function returns the slideshow object with the following attributes:
 - slideshow.speeds:
   array of available speeds,
 - slideshow.modes:
   array of available modes,
 - slideshow.setMode (mode):
   method that change the current mode or speed,
 @param slideshow: the slideshow object,
 @return object: slideshow object.
 Remove all the existing modes of the given element.
 @param elem: the element,
 @param what: the modes or the speeds array,
 @return void.
 Return the first spefified mode of the slideshow.
 @param elem: the element,
 @param what: the modes or the speeds array,
 @return string or false: the mode name if any, or false.
 Set the slideshow mode and speed according to the slide specific
 mode and speed ir any.
 @param slide: the slide to select,
 @return void.
 Select a slide - the slide to select can be specified as previous,
 next or by its number.
 @param slide_to_select: the slide to select,
 @return void.
 Select the next slide from the autostart timer.
 @return void.
 Create the autostart timer if the autostart attribute of the slide show
 is set.
 @return void.
 Select a slide from the user interactions.
 @param slide_to_select: the slide to select,
 @return void.
 Set the slide gesture event handler.
 @param carousel: the carousel to bind,
 @return void.
 Set the default mode and speed.
 @return void.
 Change the mode of the slideshow.
 @param mode: the mode to change,
 @return void.
 Create the previous or next button.
 @param side: 'previous' or 'next',
 @return void.
*/
function CS_bind_slideshow(a){function b(m,r){for(let v of r)if(CS_has_class(m,v))return v;return!1}function c(m,r,v){for(let w of r)CS_del_class(m,w);CS_add_class(m,v)}function d(m){if(m.mode){var r=b(a,a.modes);a.org_mode=r;c(a,a.modes,m.mode)}else a.org_mode&&(c(a,a.modes,a.org_mode),a.org_mode=!1);m.speed?(r=b(a,a.speeds),a.org_speed=r,c(a,a.speeds,m.speed)):a.org_speed&&(c(a,a.speeds,a.org_speed),a.org_speed=!1);m.direction?(r=b(a,a.directions),a.org_direction=r,c(a,a.directions,m.direction)):
a.org_direction&&(c(a,a.directions,a.org_direction),a.org_direction=!1)}function e(m,r,v){var w=!1;for(var x=a.modes.indexOf("---")+1;x<a.modes.length;x++)if(CS_has_class(a,a.modes[x])){w=!0;break}if(w){switch(m){case "previous":x="leftOrTopToCenter";var z="centerToRightOrBottom";break;case "next":x="rightOrBottomToCenter";z="centerToLeftOrTop";break;default:v>r?(x="rightOrBottomToCenter",z="centerToLeftOrTop"):(x="leftOrTopToCenter",z="centerToRightOrBottom")}(m=CS_has_class(a,"no"))||CS_add_class(a,
"no");w=a.carousel;for(let B=0;B<a.nb_slides;B++)w.children[B].className="slide";CS_add_class(w.children[r],z);CS_add_class(w.children[v],x);for(r=0;r<a.nb_slides;r++)w.children[r].offsetHeight;m||CS_del_class(a,"no")}}function f(m){if(m!=a.current){var r=a.carousel,v=a.indicators,w=a.nb_slides,x=a.current;switch(m){case "previous":w=0==a.current?w-1:a.current-1;break;case "next":w=a.current==w-1?0:a.current+1;break;default:w=0<=m&&m<w?m:0}d(r.children[w]);CS_has_class(a,"random")&&(c(a,a.modes,a.modes[Math.trunc(Math.random()*
(a.modes.length-1))]),c(a,a.directions,a.directions[Math.trunc(Math.random()*(a.directions.length-1))]));e(m,x,w);CS_del_class(r.children[x],"selected");CS_add_class(r.children[w],"selected");CS_del_class(v.children[x],"selected");CS_add_class(v.children[w],"selected");a.current=w;"undefined"!=typeof a.attributes.onslide&&eval(a.attributes.onslide.value)}}function g(){f("next")}function l(){if("undefined"!=typeof a.attributes.autostart){let m=parseInt(a.attributes.autostart.value);0<m&&(a.timer=setInterval(g,
m))}}function q(m){function r(x){CS_stop_propagation(x);console.log("end drag");m.onmousedown=v;m.onmouseup=m.onmouseleave=null;var z=CS_getxy(x);x=z.x-w.x;z=z.y-w.y;f(Math.abs(x)>Math.abs(z)?0<x?"previous":"next":0<z?"previous":"next");return!1}function v(x){CS_stop_propagation(x);console.log("start drag");m.onmousedown=null;m.onmouseup=m.onmouseleave=r;w=CS_getxy(x)}let w;m.onmousedown=v;m.ondragstart=function(){return!1}}function h(){let m=!1;for(let r of a.speeds)if(CS_has_class(a,r)){m=!0;break}m||
CS_add_class(a,"fast");m=!1;for(let r of a.modes)if(CS_has_class(a,r)){m=!0;break}m||CS_add_class(a,"cube");m=!1;for(let r of a.directions)if(CS_has_class(a,r)){m=!0;break}m||CS_add_class(a,"horizontal")}function k(m){let r;if(a.speeds.includes(m))r=a.speeds;else if(a.directions.includes(m))r=a.directions;else if(a.modes.includes(m))r=a.modes;else return;for(let v of r)v==m?CS_add_class(a,v):CS_del_class(a,v)}function p(m){let r=document.createElement("button");r.className="button "+m;r.title="Select the "+
m+" slide";r.onclick=function(){f(m)};a.appendChild(r)}if(a){if(1!=a.binded){a.binded=!0;a.speeds=["no","slow","fast"];a.modes="visible scale opacity --- translate cube book page flip".split(" ");a.directions=["horizontal","vertical"];a.setMode=k;h();let m=document.createElement("div");a.carousel=m;m.className="carousel";var n=[],t=!1;for(var u=0;u<a.childNodes.length;u++){let r=a.childNodes[u];switch(r.nodeName){case "DIV":case "IMG":case "FIGURE":CS_add_class(r,"slide"),r.mode=b(r,a.modes),r.speed=
b(r,a.speeds),n.push(a.childNodes[u]),CS_has_class(a.childNodes[u],"selected")&&(t=!0)}}a.appendChild(m);a.nb_slides=0;if(0==n.length){m.innerHTML="Empty slide show...";return}q(m);u=!1;for(var y of n)u||(u=y),CS_has_class(y,"reference")&&(u=y),t||(CS_add_class(y,"selected"),t=!0),CS_has_class(y,"selected")&&(a.current=a.nb_slides),y.number=a.nb_slides++,m.appendChild(y);u=u.cloneNode(!0);CS_del_class(u,"selected");m.appendChild(u);p("previous");p("next");"undefined"!=typeof a.attributes.onconfigure&&
(t=document.createElement("button"),t.className="button config",t.title="Configure the slide show",t.onclick=function(r){r.stopPropagation();eval(a.attributes.onconfigure.value);return!1},a.appendChild(t));t=document.createElement("div");a.indicators=t;a.appendChild(t);t.className="indicators";y=0;for(let r of n)n=document.createElement("div"),t.appendChild(n),n.className="indicator",n.title="Switch to slide "+(y+1),n.onclick=function(v){return function(){f(v)}}(y),y++==a.current&&CS_add_class(n,
"selected");"undefined"!=typeof a.attributes.onslide&&eval(a.attributes.onslide.value);l();m.ontouchstart=function(){console.log("touch start")};m.ontouchend=function(){console.log("touch end")};m.onmouseclick=function(){console.log("touch start")}}return a}return null};/*
 Force to resize a split.
 @param split: the split widget,
 @param delta: displavement of the gripper or false,
 @param org: original panel size as {left: <integer>, right: <integer>},
 @return void.
 On split resize callback.
 @param split_id: the split identifier,
 @param event: the calling event,
 @param callback: the on split callback function,
 @return void.
 Onmousemove event handler.
 @param event: the event,
 @return false.
 Bind the given split widget.
 @param split: the split widget,
 @param callback: the on split callback function as
 function (left_size, right_size, wrap_mode),
 @return void.
*/
function CS_split_resize(a,b,c){console.log("resize split: delta ="+b);var d=a.children[0];let e=a.children[1],f=a.children[2];var g=CS_has_class(a,"CS_wrap");"undefined"==typeof b&&(b=0);"undefined"==typeof c&&(c=!1);if(a.vertical){g=CS_get_internal_height(a)-CS_get_external_height(e)-10;c=c?c.left:2*g/3|0;c+=b;c>g&&(c=g);CS_set_external_height(d,c);c=CS_get_external_height(d);b=CS_get_internal_height(a)-CS_get_external_height(d)-CS_get_external_height(e);CS_set_external_height(f,b);if(d=b-CS_get_external_height(f))CS_set_external_height(f,
b+d),console.log(CS_strformat("Diff adjustment: right.height set to % and have %",b+d,CS_get_external_height(f)));c+b>a.clientHeight&&console.log(CS_strformat("Error: left.height + right.height > split.clientHeight: % + % = % > %",c,b,c+b,a.clientHeight))}else if(c=c?c.left:CS_get_external_width(d),c+=b,CS_set_external_width(d,c),c=CS_get_external_width(d),console.log(CS_strformat("left.width set to % and have %",c,CS_get_external_width(d))),g)e.style.left=c+"px";else{b=CS_get_internal_width(a)-CS_get_external_width(d)-
CS_get_external_width(e);CS_set_external_width(f,b);console.log(CS_strformat("right.width set to % and have %",b,CS_get_external_width(f)));if(d=b-CS_get_external_width(f))CS_set_external_width(f,b+d),console.log(CS_strformat("Diff adjustment: right.width set to % and have %",b+d,CS_get_external_width(f)));c+b>=CS_get_internal_width(a)&&console.log(CS_strformat("Error: left.width + right.width > split.clientWidth: % + % = % > %",c,b,c+b,CS_get_internal_width(a)))}}
function CS_split_resize_callback(a,b,c){function d(t){let u;l.vertical?(u=t.clientY-g,CS_add_class(h,"CS_vgripper-hover"),q.width=CS_get_external_width(q)):(u=t.clientX-f,CS_add_class(h,"CS_gripper-hover"));CS_split_resize(l,u,n);c&&c(CS_get_external_width(q),CS_get_external_width(k),p);CS_stop_propagation(t);return!1}function e(t){console.log("Pannel drag stopped");l.vertical?CS_del_class(h,"CS_vgripper-hover"):CS_del_class(h,"CS_gripper-hover");CS_del_class(q,"CS_unselectable");CS_del_event(document,
"mousemove",d,!0);CS_del_event(document,"mouseup",e,!0);CS_stop_propagation(t);return!1}let f=b.clientX,g=b.clientY,l=document.getElementById(a),q=l.children[0],h=l.children[1],k=l.children[2],p=CS_has_class(l,"CS_wrap"),n={};CS_add_class(q.parentNode,"CS_unselectable");l.vertical?(n.left=CS_get_internal_height(q),n.right=CS_get_internal_height(k)):(n.left=CS_get_external_width(q),n.right=CS_get_external_width(k));CS_add_event(document,"mousemove",d,!0);CS_add_event(document,"mouseup",e,!0)}
function CS_bind_split(a,b){let c=a.children[0],d=a.children[1],e=a.children[2];""==a.id&&(a.id=CS_generate_uuid("split"));let f=CS_get_internal_height(a);CS_get_internal_width(a);let g;"undefined"==typeof a.vertical?(g="undefined"!=typeof a.attributes.vertical&&"true"==a.attributes.vertical.value,a.vertical=g):g=a.vertical;"undefined"==typeof c||"undefined"!=typeof c.binded&&c.binded||(c.binded=!0,""==c.id&&(c.id=CS_generate_uuid("left")),g?(CS_add_class(c,"CS_vleft"),CS_set_external_height(c,(f-
CS_get_external_height(d))/2)):(CS_add_class(c,"CS_left"),CS_set_external_height(c,f)));"undefined"==typeof d||"undefined"!=typeof d.binded&&d.binded||(d.binded=!0,""==d.id&&(d.id=CS_generate_uuid("gripper")),d.onmousedown=function(l){CS_split_resize_callback(a.id,l,b);CS_stop_propagation(l)},g?CS_add_class(d,"CS_vgripper"):(CS_add_class(d,"CS_gripper"),CS_set_external_height(d,f)));"undefined"==typeof e||"undefined"!=typeof e.binded&&e.binded||(e.binded=!0,""==e.id&&(e.id=CS_generate_uuid("right")),
g?(CS_add_class(e,"CS_vright"),CS_set_external_height(e,f-CS_get_external_height(c)-CS_get_external_height(d))):(CS_add_class(e,"CS_right"),CS_set_external_height(e,f)))};/*
 Is a string is ended with a postfix string.
 @param string: the string where to search,
 @param postfix: the postfix to search,
 @return boolean: the status.
 compute the CRC32 of a string.
 @param str: the string,
 @return int: the CRC.
 Encode a string to UTF8.
 @param s: the string,
 @return string: the UTF8 string.
 Dencode a string from UTF8.

 code that could be inresting to use because escape() and unescape() are
 deprecated...

 function Utf8ArrayToStr(codes, start, end) {
     var out, i, len, c;
     var char2, char3;

     out = "";
     len = end - start;
     i = 0;
     while (i < len) {
       c = codes[start + i++];
       switch (c >> 4) {
       case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:
         // 0xxxxxxx
         out += String.fromCharCode (c);
         break;

       case 12: case 13:
         // 110x xxxx   10xx xxxx
         char2 = codes[start + i++];
         out  += String.fromCharCode (((c & 0x1F) << 6) | (char2 & 0x3F));
         break;

       case 14:
         // 1110 xxxx  10xx xxxx  10xx xxxx
         char2 = codes[start + i++];
         char3 = codes[start + i++];
         out  += String.fromCharCode (((c     & 0x0F) << 12) |
                                      ((char2 & 0x3F) <<  6) |
                                      ((char3 & 0x3F) <<  0)  );
         break;
     }
     }

     return out;
 }

 @param s: the string,
 @return string: the decoded UTF8 string.
*/
function CS_str_ends_with(a,b){return-1!==a.indexOf(b,a.length-b.length)}function CS_strformat(a){let b=a,c=0;for(;/%%/.test(b);)b=b.replace("%%","_!___#__!__");for(;/%/.test(b);)b=b.replace("%",arguments[++c]);for(;/_!___#__!__/.test(b);)b=b.replace("_!___#__!__","%");return b}function CS_is_print(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a?a:-1!="\t @#&\"'({[\u00a7!\u00e7\u00e0)}]-_^\u00a8\u00a8$*\u00f9%`\u00a3,?;.:/=+<>~|".indexOf(a)}
var CS_crc32_a_table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",CS_crc32_b_table=
CS_crc32_a_table.split(" ").map(function(a){return parseInt(a,16)});function CS_crc32(a){let b=-1;for(let c=0,d=a.length;c<d;c++)b=b>>>8^CS_crc32_b_table[(b^a.charCodeAt(c))&255];return(b^-1)>>>0}function CS_generate_uuid(a,b){let c=(new Date).getTime();a=(a?a+b:"")+"xxxx-xx-4x-yxxx-xxxx".replace(/[xy]/g,function(d){let e=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"==d?e:e&7|8).toString(16)});b&&"-"!=b&&(a=a.replace(/-/g,b));return a}
function CS_strToUTF8(a){try{return unescape(encodeURIComponent(a))}catch(b){return a}}function CS_strFromUTF8(a){try{return decodeURIComponent(escape(a))}catch(b){return a}};/*
 Return a value for a style of an element. The coordinates are converted
 in pixels.
 @param el: the element,
 @param styleProp: the style,
 @return string: the value.
 Return an integer value for a style of an element.
 The coordinates are converted
 in pixels.
 @param el: the element,
 @param styleProp: the style,
 @return string: the value.
 Return the horizontal padding value of an element.
 @param el: the element,
 @return number: the value.
 Return the vertical padding value of an element.
 @param el: the element,
 @return number: the value.
 Return the external width of an element.
 @param el: the element,
 @return number: the value.
 Return the external height of an element.
 @param el: the element,
 @return number: the value.
 Set the external width of an element.
 @param el: the element,
 @param value: the value as a string or an integer,
 @return void.
 Set the external height of an element.
 @param el: the element,
 @param value: the value as a string or an integer,
 @return void.
 Return the internal width of an element.
 @param el: the element,
 @return number: the value.
 Return the internal height of an element.
 @param el: the element,
 @return number: the value.
 Set the internet width of an element.
 @param el: the element,
 @param value: the value as a string or an integer,
 @return void.
 Set the internet height of an element.
 @param el: the element,
 @param value: the value as a string or an integer,
 @return void.
 return the top position of an element against another owner element.
 @param element: the starting element,
 @param parent: the optional parent element
 @return int: the top position.
 return the left position of an element against another owner element.
 @param element: the starting element,
 @param parent: the optional parent element
 @return int: the left position.
 return the top position of an element against the windows.
 @param element: the starting element,
 @param parent: the optional parent element
 @return int: the top position.
 return the left position of an element against the window.
 @param element: the starting element,
 @param parent: the optional parent element
 @return int: the left position.
 ensure an element is visible.
 @param element: the element,
 @return void.
 Add a stylesheet to set the gui color settings to the inputs.
 @param color: the web color to use for gui,
 @param rounded: use rounded inputs,
 @return void.
*/
function CS_get_style(a,b){let c=(a.ownerDocument||document).defaultView;if(c&&c.getComputedStyle)return b=b.replace(/([A-Z])/g,"-$1").toLowerCase(),c.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()}),b=a.currentStyle[b],/^\d+(em|pt|%|ex)?$/i.test(b)?function(d){let e=a.style.left,f=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=d||0;d=a.style.pixelLeft+"px";a.style.left=e;a.runtimeStyle.left=
f;return d}(b):b}function CS_get_int_style(a,b){a=CS_get_style(a,b);a=""==a||"0px"==a?0:parseInt(a);(-1E4>a||1E4<a)&&console.log("error");return a}function CS_get_width_pad(a){return CS_get_int_style(a,"padding-left")+CS_get_int_style(a,"padding-right")+CS_get_int_style(a,"border-left-width")+CS_get_int_style(a,"border-right-width")+CS_get_int_style(a,"margin-left")+CS_get_int_style(a,"margin-right")}
function CS_get_height_pad(a){return CS_get_int_style(a,"padding-bottom")+CS_get_int_style(a,"padding-top")+CS_get_int_style(a,"border-top-width")+CS_get_int_style(a,"border-bottom-width")+CS_get_int_style(a,"margin-top")+CS_get_int_style(a,"margin-bottom")}function CS_get_external_width(a){return a.offsetWidth+CS_get_int_style(a,"margin-left")+CS_get_int_style(a,"margin-right")}
function CS_get_external_height(a){return a.offsetHeight+CS_get_int_style(a,"margin-top")+CS_get_int_style(a,"margin-bottom")}function CS_set_external_width(a,b){switch(typeof b){case "undefined":a.style.width=null;break;case "string":a.style.width=b;break;default:let c=CS_get_width_pad(a);c+=CS_get_int_style(a,"border-right-width");c+=CS_get_int_style(a,"border-left-width");a.style.width=(b>=c?b-c:0)+"px"}}
function CS_set_external_height(a,b){switch(typeof b){case "undefined":a.style.height=null;break;case "string":a.style.height=b;break;default:let c=CS_get_height_pad(a);c+=CS_get_int_style(a,"border-right-height");c+=CS_get_int_style(a,"border-left-height");a.style.height=(b>=c?b-c:0)+"px"}}function CS_get_internal_width(a){return a.clientWidth-CS_get_int_style(a,"padding-left")-CS_get_int_style(a,"padding-right")}
function CS_get_internal_height(a){return a.clientHeight-CS_get_int_style(a,"padding-top")-CS_get_int_style(a,"padding-bottom")}function CS_set_internal_width(a,b){switch(typeof b){case "undefined":a.style.width=null;break;case "string":a.style.width=b;break;default:a.style.width=b+"px"}}function CS_set_internal_height(a,b){switch(typeof b){case "undefined":a.style.height=null;break;case "string":a.style.height=b;break;default:a.style.height=b+"px"}}
function CS_get_top(a,b){for(;a&&(!b||CS_is_descendant(a,b));a=a.offsetParent||a.parentElement);return top}function CS_get_left(a,b){for(;a&&(!b||CS_is_descendant(a,b));a=a.offsetParent||a.parentElement);return left}function CS_get_y(a,b){return a.getBoundingClientRect().top}function CS_get_x(a,b){return a.getBoundingClientRect().left}
function CS_ensure_visible(a){function b(n){return"relative"==CS_get_style(n,"position")?n:n.parentElement?b(n.parentElement):!1}switch(CS_get_style(a,"position")){case "fixed":var c=!1;break;case "absolute":c=b(a.parentElement);break;default:case "static":return}let d=CS_get_x(a),e=CS_get_y(a),f=CS_get_external_width(a),g=CS_get_external_height(a),l=c?CS_get_x(c):0;c=c?CS_get_y(c):0;let q=window.innerWidth,h=window.innerHeight,k=d,p=e;f<q?0>d?k=-l+20:0<d&&d+f>q&&(k=q-f-20-l):(a.style.width=q+"px",
k=-l);g<h?0>e?p=-c+20:0<e&&e+g>h&&(p=h-g-20-c):(a.style.height=h+"px",p=-c);k!=d&&(a.style.left=k+"px",a.style.right="auto");p!=e&&(a.style.top=p+"px",a.style.bottom="auto")}function CS_get_document_scroll(a){let b=null;"undefined"!=typeof document.scrollingElement&&(b=document.scrollingElement);null==b&&(b=document.documentElement);switch(a){case "top":return b.scrollTop;case "bottom":return b.scrollBottom;case "right":return b.scrollRight;case "left":return b.scrollLeft;default:return 0}}
function CS_set_document_scroll(a,b){let c=null;"undefined"!=typeof document.scrollingElement&&(c=document.scrollingElement);null==c&&(c=document.documentElement);switch(a){case "top":c.scrollTop=b;break;case "bottom":c.scrollBottom=b;break;case "right":c.scrollRight=b;break;case "left":c.scrollLeft=b}}
function CS_blur_all(a,b){if(a.parentNode)for(let c=0,d=a.parentNode.children.length;c<d;c++){let e=a.parentNode.children[c];e!=a&&(!0===b?CS_add_class(e,"CS_blur"):!1===b?CS_del_class(e,"CS_blur"):e.style.filter=0===b?"":"blur("+b+"px)")}}
function CS_color_to_rgb(a){let b=document.createElement("div");b.style.display="none";b.style.color=a;document.body.appendChild(b);a=window.getComputedStyle(b).getPropertyValue("color");a=/rgb\s*\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(a);document.body.removeChild(b);return{r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}}function CS_set_input_color(a,b){b=CS_color_to_rgb(a);b=128<(b.r+b.g+b.b)/3?"#000":"#fff";let c=document.createElement("style");c.innerHTML=`
  input[type="range"],
  input[type="radio"],
  input[type="checkbox"] {
    /* remove standard background appearance */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    outline: none;
    display: inline-block;
    padding: 0.05em;
    border: 2px solid ${a};
    background-clip: content-box;
    position: relative;
    height: 1.2em;
  }

  input[type="radio"],
  input[type="checkbox"] {
    width: 1.2em;
    cursor: hand;
  }

  .rounded input[type="range"] {
    background: none !important;
  }

  .rounded input[type="radio"] {
    border-radius: 50%;
  }

  .rounded input[type="checkbox"] {
    border-radius: 25%;
  }

  .rounded input[type="range"] {
    border-radius: 1em;
  }

  /* appearance for checked radiobutton */
  input[type="radio"]:checked,
  input[type="checkbox"]:checked {
    background-color: ${a};
  }

  input[type="checkbox"]:checked:after {
    content: '\u2713';
    position: absolute;
    top: 0.5em;
    left: 0.1em;
    font-size: 1em;
    color: ${b};
    line-height: 0;
    -webkit-transition: all .2s;
    transition: all .2s;
  }

  input[type='range']::-webkit-slider-runnable-track {
    height: 10px;
    -webkit-appearance: none;
    color: red;
    margin-top: -1px;
  }

  input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 0.85em;
    height: 0.85em;
    cursor: ew-resize;
    background: ${a};
    border-radius: 1em;
    border: 0;
  }
  `.trim();document.body.appendChild(c)};/*
 Select a Tab.
 @param tabl_id: the Tab identifier,
 @param page_id: the page identifier,
 @return void.
 Add a new Tab.
 @param tab_id: the Tab identifier,
 @param page_id: the page identifier,
 @param title_text: the page title,
 @param current_node: the page content,
 @param on_config: on config callback or NULL; if set, a configuration
 button is added,
 @return void.
 Remove new Tab.
 @param tab_id: the Tab identifier,
 @param page_id: the page identifier,
 @return void.
 Prepare a Tab for working.
 @param tab: the Tab node,
 @return void.
*/
function CS_select_tab(a,b){a=document.getElementById(a);for(let c=0;c<a.children.length;c++)if("div"==a.children[c].tagName.toLowerCase()){let d=a.children[c];d.id==b?(d.style.display="block",CS_add_class(d,"CS_selected")):(d.style.display="none",CS_del_class(d,"CS_selected"))}}
function CS_add_page(a,b,c,d,e){let f=document.getElementById(a);f?CS_get_children_by_id(f,b)?console.log("Error: element with id '"+b+"' already exists"):(a=document.createElement("div"),f.appendChild(a),a.id=b,a.style.display="none",b=a.title_child=document.createElement("div"),b.innerHTML=c,a.appendChild(b),e&&(c=a.config_child=document.createElement("button"),c.title=___("Open the configuration box"),c.onclick=e,a.appendChild(c)),e=a.content_child=document.createElement("div"),a.appendChild(e),
"string"==typeof d?e.innerHTML=d:e.appendChild(d),CS_bind_page(f)):console.log("Error: unable to find the tab '"+a+"'")}function CS_remove_page(a,b){let c=document.getElementById(a);c?(a=CS_get_children_by_id(c,b))?(c.removeChild(a),CS_bind_page(c)):console.log("Error: page '"+b+"' does not exist"):console.log("Error: unable to find the tab '"+a+"'")}
function CS_bind_page(a){"undefined"!=typeof a.id&&a.id||(a.id=CS_generate_uuid("tab"));let b=!1;var c=!1;let d="<ul>";for(var e=0;e<a.children.length;e++){if("div"==a.children[e].tagName.toLowerCase()){var f=a.children[e];"undefined"!=typeof f.id&&f.id||(f.id=CS_generate_uuid("page"));0==e&&(c=f);CS_has_class(f,"CS_selected")&&(b=f)}var g=f.title_child;g.orgHTML||(g.orgHTML=g.innerHTML);d+='<li><a href="#" onclick="CS_select_tab(\''+a.id+"', '"+f.id+"')\">"+g.orgHTML+"</a></li>"}d+="</ul>";!b&&c&&
(b=c,c.style.display="block");for(c=0;c<a.children.length;c++)if("div"==a.children[c].tagName.toLowerCase()){f=a.children[c];e=f.title_child;g=f.config_child;let l=f.content_child,q=e.orgHTML;CS_add_class(f,"CS_page");CS_add_class(e,"CS_title");CS_add_class(e,"CS_menu");CS_add_class(l,"CS_content");g&&CS_add_class(g,"CS_config");e.innerHTML='<ul><li><a href="#">'+q+" &nbsp;&nbsp;"+d+"</a></li></ul>";CS_bind_menu(e,CS_close_menu)}CS_select_tab(a.id,b.id)};var CS_TooltipPosition={top:1,bottom:2,left:4,right:8,middle:16,center:32};
function CS_tooltip(a,b,c,d,e){function f(){e||(e=CS_TooltipPosition.top|CS_TooltipPosition.left);g.innerHTML=c;g.style.left=g.style.right=g.style.top=g.style.bottom="auto";e&CS_TooltipPosition.top?g.style.top=b+"px":e&CS_TooltipPosition.bottom&&(g.style.bottom=b+"px");e&CS_TooltipPosition.left?g.style.left=a+"px":e&CS_TooltipPosition.right&&(g.style.right=a+"px");g.style.display="block";g.last=CS_now()}var g=document.cs_tooltip;g||(document.cs_tooltip=g=document.createElement("div"),g.className=
"CS_tooltip",g.onmouseover=function(l){window.clearInterval(g.interval)},g.onmouseout=function(){g.style.display="none"},document.body.insertBefore(g,document.body.firstChild));if(g&&g.message==c&&g.x==a&&g.y==b)return g.innerHTML;g.message=c;g.x=a;g.y=b;window.clearInterval(g.interval);g.interval=null;"undefined"!=typeof a?d&&"none"==g.style.display?g.interval=CS_alarm(1300,f):f():g.interval=CS_alarm(300,function(){g.style.display="none";g.innerHTML=g.message="";g.last=CS_now()});return g.interval}
function CS_set_tooltip(a,b,c){var d=a.onclick,e=a.onmouseover,f=a.onmouseout,g=!1;a.onmouseover=function(l){l=l||window.event;var q=a.getBoundingClientRect(),h=q.left,k=q.bottom;c&CS_TooltipPosition.top?k=q.top:c&CS_TooltipPosition.bottom?k=q.bottom:c&CS_TooltipPosition.middle&&(k=q.top+(q.bottom-q.left)/2);c&CS_TooltipPosition.left?h=q.left:c&CS_TooltipPosition.right?h=q.right:c&CS_TooltipPosition.center&&(h=q.left+(q.right-q.left)/2);g=CS_tooltip(h,k,b,!0);e&&e(l)};a.onclick=function(l){window.clearInterval(g);
d&&d(l)};a.onmouseout=function(l){CS_tooltip();f&&f(l)}};function CS_bind_tree(a){function b(d){d=(d?d:window.event).target;let e=d.parentNode,f,g,l;CS_has_class(d,"CS_expanded")?(g=/(?:^|\s)CS_expanded(?!\S)/g,l=" CS_collapsed",f=!1):CS_has_class(d,"CS_collapsed")&&(g=/(?:^|\s)CS_collapsed(?!\S)/g,l=" CS_expanded",f=!0);for(let q=0,h=e.parentNode.children.length;q<h;q++){let k=e.parentNode.children[q];"blockquote"==k.tagName.toLowerCase()&&(f?k.org_height?CS_set_external_height(k,k.org_height):k.style.height="auto":(k.org_height=CS_get_external_height(k),
CS_set_external_height(k,k.org_height),CS_set_external_height(k,0)))}d.className=d.className.replace(g,l)}function c(d){for(let l=0,q=d.children.length;l<q;l++){var e=d.children[l];if("div"==e.tagName.toLowerCase()){CS_add_class(e,"CS_item");var f="CS_expanded";"undefined"!=typeof e.attributes.collapsed&&(f="CS_collapsed");for(let h=0,k=e.children.length;h<k;h++)if("blockquote"==e.children[h].tagName.toLowerCase()){var g=e.childNodes[0];let p=document.createElement("span"),n=document.createElement("span");
p.appendChild(n);n.className=f;n.innerHTML="&nbsp;";if("#text"==g.nodeName){let t=document.createElement("span");t.innerHTML=g.data;p.appendChild(t)}else p.appendChild(g);e.insertBefore(p,e.firstChild);n.onclick=b;break}f="collapsed"==f;for(let h=0,k=e.children.length;h<k;h++)g=e.children[h],"blockquote"==g.tagName.toLowerCase()&&(f&&CS_set_external_height(g,0),0<g.children.length&&c(g))}}}c(a)};/*
 bind the upload elements
 inspired from: http://html5demos.com/dnd-upload
 @param check: function that checks the uploaded file names or
 false,
 @param onclose: on close callback or false,
 @return void.
*/
function CS_bind_upload(a,b,c){function d(l){function q(n){a.attributes.onprogress?(a.progress=n,eval(!a.attributes.onprogress.value)):e&&(e.value=n)}let h=[],k=0;for(var p=0;p<l.length;p++)if(!b||b(l[p].name))h["file"+p]=l[p],k++;if(0!=k){for(p=0;p<a.elements.length;p++)switch(a.elements[p].type){case "checkbox":case "radio":a.elements[p].checked&&(h[a.elements[p].name]=a.elements[p].value);break;default:h[a.elements[p].name]=a.elements[p].value}e&&CS_del_class(e,"CS_hidden");CS_ajax_load({url:a.action,
args:h,onsuccess:function(n){q(100);a.attributes.onsuccess?eval(a.attributes.onsuccess.value):CS_notify("Files uploaded","success");CS_add_class(e,"CS_hidden");c&&c(n)},onerror:function(n){a.attributes.onerror?eval(a.attributes.onerror.value):CS_notify("Files not uploaded: "+n,"error");c&&c(!1)},onprogress:e||a.attributes.onprogress?q:!1})}}if("FORM"!=a.tagName)alert("Error: form expected");else{var e=!1;if(!a.attributes.onprogress){for(var f=0;f<a.children.length;f++)if("PROGRESS"==a.children[f].tagName){e=
a.children[f];break}e&&!1 in new XMLHttpRequest?(CS_add_class(e,"CS_hidden"),e=!1):e||(e=document.createElement("progress"),a.appendChild(e))}e&&(CS_add_class(e,"CS_hidden"),e.min=0,e.max=100,e.value=0,e.innerHTML="0");if("draggable"in a){for(f=0;f<a.elements.length;f++){let l=a.elements[f];"INPUT"==l.tagName&&"file"==l.type&&(CS_add_class(l,"CS_hidden"),l.onchange=function(){d(l.files)})}!1 in new XMLHttpRequest&&CS_add_class(e,"CS_hidden");a.ondragover=function(l){CS_stop_propagation(l);CS_add_class(this,
"CS_hover");return!1};a.ondragend=function(l){CS_stop_propagation(l);CS_del_class(this,"CS_hover");return!1};a.ondrop=function(l){CS_stop_propagation(l);CS_del_class(this,"CS_hover");d(l.dataTransfer.files);return!1}}else{var g=!1;for(f=0;f<a.elements.length;f++)if("INPUT"==a.elements[f].tagName&&"file"==a.elements[f].type){g=a.elements[f];break}g||(g=document.createElement("input"),g.type="file",a.appendChild(g));g.multiple="multiple";CS_del_class(a.elements[f],"CS_hidden");g.onchange=function(){d(g.files)}}}}
;
